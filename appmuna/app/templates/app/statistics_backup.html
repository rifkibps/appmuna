{% extends 'horizontal/home_app.html' %}

{% load static %}

{% block css-extender %}
<style>
    #expandButton:focus {     
        box-shadow:none;    
    }
</style>
{% endblock css-extender %}

{% block main-content %}
<!-- START HERO -->
{% comment %} 630 {% endcomment %}
<section class="hero-section" style="height:630px">
    <div class="container">
        <div class="row align-items-center" id="search-content">
            <div class="col-md-6 mt-4">
                <div class="">
                    <div>
                        <span class="badge bg-danger rounded-pill">Baru</span> 
                        <span class="text-white-50 ms-1">Selamat datang di portal Satu Data Muna</span>
                    </div>
                    <h3 class="text-white fw-normal my-3 hero-title">
                        Telusuri Data Statistik Kabupaten Muna
                    </h3>
                    <p class="pr-2 mb-3 font-15 text-white-50"><span class="text-white fw-normal">SDM</span> merupakan wujud sinergi dan kolaborasi bersama antara BPS Kab. Muna selaku penyedia layanan data.</p>

                    <div class="row align-items-start">
                        <div class="col-lg-12 d-flex justify-content-start">
                            <div class="app-search dropdown">
                                <form>
                                    <div class="row gy-2 gx-2">
                                        <div class="col-12">
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="Telusuri data statistik ..." id="top-search-mitra" autocomplete="off" style="width:400px;height:50px;background-color:#ffffff;border-radius:5px">
                                                <span class="mdi mdi-magnify search-icon" style="margin-top:5px"></span>
                                                <button class="btn btn-danger rounded" style="height:48px;margin-left:8px" id="button-top-search">Telusuri Data</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 offset-md-2">
                <div class="text-md-end mt-1">
                    <img src="{% static 'app-design/assets/images/startup.svg' %}" alt="" class="img-fluid">
                </div>
            </div>
        </div>

    </div>
</section>
<!-- END HERO -->
<section class="pt-3 pb-5 bg-white" id="main-content" style="margin-top:-50px;"> 
    <div class="container">
        <div class="row justify-content-end">
            <button class="btn bg-white"  style="width:100px; height:40px; font-size:12px; border-radius:20px; margin-top:-45px; padding: 8px 0px 8px 5px; z-index:10; margin-right:10px!important;" id="expandButton">Expand <i class="mdi mdi-arrow-up-down"></i></button>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="page-title-box">
                    <div class="page-title-left">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item"><a href="javascript: void(0);">Statistik</a></li>
                            <li class="breadcrumb-item"><a href="javascript: void(0);">Sosial & Kependudukan</a></li>
                            <li class="breadcrumb-item active text-truncate">Angka Harapan Hidup (AHH) Menurut Provinsi dan Jenis Kelamin (menggunakan UHH hasil SP2020 LF), 2022-2023
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <div class="row py-4 font-13">
            <div class="col-12">
                <div class="row">
                    <div class="col-lg-3">
                            <div class="card">
                                <div id="external-events" class="card-body">
                                    <div class="external-event bg-info-lighten text-info" data-class="bg-info">
                                        Detail Tabel/Indikator
                                    </div>
                                    <div class="mt-3 d-none d-xl-block">
                                        <h5 class="text-left">Subjek:</h5>
                                        <p class="text-left">{{data_indicator.subject_id.name}}</p>
                                        <h5 class="text-left">Deskripsi:</h5>
                                        <p style="text-align: justify;">{{data_indicator.desc}}</p>
                                    </div>
                                    
                                    <div class="mt-3 d-none d-xl-block">
                                        <h5 class="text-left">Kelompok Judul Baris {% if d_form %}({{row_group_name}}){% endif %}</h5>
                                        <ul class="px-1" style="list-style:none">
                                            {% for dt  in rows_groups %}
                                                <li class="text-left text-muted">{{dt.order_num}}.&emsp;{{dt.item_row}}</li>
                                            {% endfor %}
                                        </ul>
                                    </div>
            
                                    <div class="mt-3 d-none d-xl-block">
                                        <h5 class="text-left">Periode Data:</h5>
                                        <p class="text-left">{{data_indicator.time_period_id.name}}</p>
                                        <h5 class="text-left">Satuan:</h5>
                                        <p class="text-left">{{data_indicator.unit_id.name}}</p>
                                        <h5 class="text-left">Kategori Statistik:</h5>
                                        <p class="text-left"><span class="badge bg-primary">{{data_indicator.get_stat_category_display}}</span></p>
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div id="external-events" class="card-body">
                                    <div class="external-event bg-info-lighten text-info" data-class="bg-info">
                                        Detail Tabel/Indikator
                                    </div>
                                    <div class="mt-3 d-none d-xl-block">
                                        <h5 class="text-left">Nama Tabel:</h5>
                                        <p class="text-left">{{data_indicator.name}}</p>
                                        <h5 class="text-left">Subjek:</h5>
                                        <p class="text-left">{{data_indicator.subject_id.name}}</p>
                                        <h5 class="text-left">Subjek CSA:</h5>
                                        <p class="text-left">{{subject_csa}}</p>
                                        <h5 class="text-left">Deskripsi:</h5>
                                        <p style="text-align: justify;">{{data_indicator.desc}}</p>
                                    </div>
                                    
                                    <div class="mt-3 d-none d-xl-block">
                                        <h5 class="text-left">Kelompok Karakteristik {% if d_form %}({{col_group_name}}){% endif %}</h5>
                                        <ul class="ps-3">
                                            {% if col_groups|length > 0 %}
                                                {% for dt  in col_groups %}
                                                    <li class="text-left text-muted">
                                                        {% if dt.item_char %}
                                                        {{dt.item_char}}
                                                        {% else %}
                                                        {{dt}}
                                                        {% endif %}
                                                    </li>
                                                {% endfor %}
                                            {% endif %}
                                        </ul>
                                    </div>
            
                                    <div class="mt-3 d-none d-xl-block">
                                        <h5 class="text-left">Kelompok Judul Baris {% if d_form %}({{row_group_name}}){% endif %}</h5>
                                        <ul class="px-1" style="list-style:none">
                                            {% for dt  in rows_groups %}
                                                <li class="text-left text-muted">{{dt.order_num}}.&emsp;{{dt.item_row}}</li>
                                            {% endfor %}
                                        </ul>
                                    </div>
            
                                    <div class="mt-3 d-none d-xl-block">
                                        <h5 class="text-left">Periode Data:</h5>
                                        <p class="text-left">{{data_indicator.time_period_id.name}}</p>
                                        <h5 class="text-left">Satuan:</h5>
                                        <p class="text-left">{{data_indicator.unit_id.name}}</p>
                                        <h5 class="text-left">Kategori Statistik:</h5>
                                        <p class="text-left"><span class="badge bg-primary">{{data_indicator.get_stat_category_display}}</span></p>
                                    </div>
                                </div>
                            </div>
                    </div> <!-- end col-->
        
                    <div class="col-lg-9">
                        <div class="card">
                            <div class="card-body px-3 mt-4 mt-lg-0">
                                <div class="row mb-3">
                                    <div class="col-sm-6 align-items-start">
                                        <button class="btn btn-primary btn-sm btn-rounded font-14" disabled> Tahun 2024 </button>
                                        <button class="btn btn-primary btn-sm btn-rounded font-14" disabled> Triwulan 1 </button>
                                    </div>
                                    <div class="col-sm-6 d-flex justify-content-end">
                                        <div class="dropdown">
                                            <button class="btn btn-sm btn-primary btn-rounded font-14"><i class="mdi mdi-share-variant-outline"></i> Bagikan</button>
                                            <button class="btn btn-primary btn-sm btn-rounded dropdown-toggle font-14" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <i class="mdi mdi-download"></i> Unduh Data
                                            </button>
                                            <div class="dropdown-menu font-14" aria-labelledby="dropdownMenuButton" style="border-radius:10px">
                                                <a class="dropdown-item" href="#">XLSX</a>
                                                <a class="dropdown-item" href="#">CSV</a>
                                                <a class="dropdown-item" href="#">PDF</a>
                                            </div>
                                        </div>

                                    </div>    
                                </div>
                                <div class="mb-3">
                                    <h3 class="font-weight-bold"><strong>Angka Harapan Hidup (AHH) Menurut Provinsi dan Jenis Kelamin (menggunakan UHH hasil SP2020 LF), 2022-2023</strong></h3>
                                </div>
                                
                                <div class="mt-3">
                                    <p class="font-weight-light font-13">Terakhir diperbarui: 12 Maret 2024</p>
                                  
                                </div>
        
                                <form method="POST" action="{% url 'backend:backend-content-input-submit' %}" class="needs-validation" id="content-form-submit" novalidate="">
                                    {% csrf_token %}
                                    <input type="hidden" name="indicator_id" id="indicator_id" value="{{data_indicator.id}}">
                                    <input type="hidden" name="year" id="year" value="{{current_year}}">
                                    <input type="hidden" name="item_period" id="item_period" value="{{period.id}}">
                                    <div class="table-responsive">
                                        <table class="table table-sm table-striped table-bordered table-hover table-centered nowrap w-100 mb-1">
                                            <thead class="bg-primary-lighten">
                                                <tr>
                                                    <th rowspan="2" class="text-center">No</th>
                                                    <th rowspan="2" class="text-center">Kelompok</th>
                                                    <th class="text-center" colspan="3">Karakteristik Kemiskinan</th>
                                                </tr>
                                                <tr>
                                                    <th class="text-center">Laki-laki</th>
                                                    <th class="text-center">Perempuan</th>
                                                    <th class="text-center">Laki-laki + Perempuan</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for i in '123456789'  %}
                                                <tr >
                                                    <td class="text-center">{{forloop.counter}}</td>
                                                    <td>Buton</td>
                                                    <td class="text-center">1.200</td>
                                                    <td class="text-center">4.100</td>
                                                    <td class="text-center">3.100</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                        
                                    <h5 class="font-weight-light font-13"><i>Sumber: BPS Kabupaten Muna</i></h5>
        
                                    {% if d_form %}
                                    <div class="mt-3 mb-4">
                                        {% if status_update %}
                                            <button class="btn btn-rounded btn-primary mt-3 d-none" type="submit" id="button_submit_form">Perbarui Data Tabel</button>
                                        {% else %}
                                            <button class="btn btn-rounded btn-primary mt-3" type="submit">Simpan Data Tabel</button>
                                        {% endif %}
                                    </div>
                                    {% endif %}
                                </form>
                            </div>
                        </div>
                    </div> <!-- end col -->
        
                </div> <!-- end row -->
        
            </div>
            <!-- end col-12 -->
        </div> <!-- end row -->
    </div>
</section>

{% endblock main-content %}


{% block js-extender %}
<script>

    $( window).resize(function(){
        if($(this).width() <= 768){
            $("#search-content").addClass('d-none')
            $(".hero-section").removeAttr('style')
            $("#main-content").css('margin-top', '-200px')
            $("#expandButton").addClass('d-none')
            $("#top-search-mitra").css('width', '200px')
        }else{
            $("#search-content").removeClass('d-none')
            $(".hero-section").css('height', '630px')    
            $("#main-content").css('margin-top', '-50px')
            $("#expandButton").removeClass('d-none')
            $("#top-search-mitra").css('width', '400px')
        }
    });


    $("#expandButton").on('click', function (event){
        if ($('#main-content').css('margin-top') == '-50px'){
            $("#search-content").addClass('d-none')
            $(".hero-section").removeAttr('style')
            $("#main-content").css('margin-top', '-200px')
            $(this).parent().css({'bottom': '-98px'})
        }else{
            $(this).parent().css('bottom', '-253px')
            $(".hero-section").css('height', '630px')    
            $("#search-content").removeClass('d-none')
            $("#main-content").css('margin-top', '-50px')
        }
    })

</script>
{% endblock js-extender %}
